{% extends "accounts/base.html" %}

{% block title %}Sign Up{% endblock %}

{% block content %}
<!-- Include Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
.signup-container {
    max-width: 520px;
    margin: 0 auto;
    padding: 0;
}

.signup-header {
    text-align: center;
    margin-bottom: 2.5rem;
}

.signup-header h2 {
    font-size: 2rem;
    font-weight: 700;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
}

.signup-header p {
    color: #64748b;
    font-size: 1rem;
}

.signup-form {
    background: white;
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

/* Form styling */
form p {
    margin-bottom: 1.5rem;
    position: relative;
}

form p label {
    display: block;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
}

form p input {
    width: 100%;
    padding: 0.875rem 1rem;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background-color: #f8fafc;
    padding-right: 40px; /* space for eye icon */
}

form p input:focus {
    outline: none;
    border-color: #667eea;
    background-color: white;
    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
}

/* Password toggle icon */
.password-toggle {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #64748b;
    font-size: 1.2rem;
    user-select: none;
}

/* Button styling */
.btn-signup {
    width: 100%;
    padding: 1rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    margin-top: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.btn-signup:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
}

/* Password strength bar */
.password-strength {
    height: 4px;
    background-color: #e2e8f0;
    border-radius: 2px;
    margin-top: 0.5rem;
    overflow: hidden;
}

.password-strength-bar {
    height: 100%;
    width: 0;
    transition: all 0.3s ease;
    border-radius: 2px;
}

/* Feature list */
.features-list {
    background-color: #f8fafc;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 2rem;
}

.features-list h3 {
    font-size: 0.875rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.features-list ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.features-list li {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: #64748b;
    font-size: 0.9rem;
    margin-bottom: 0.75rem;
    line-height: 1.4;
}

.features-list li:last-child {
    margin-bottom: 0;
}

.features-list li i {
    color: #10b981;
    font-size: 1rem;
    flex-shrink: 0;
}

.divider {
    display: flex;
    align-items: center;
    text-align: center;
    margin: 2rem 0;
    color: #94a3b8;
    font-size: 0.875rem;
}

.divider::before,
.divider::after {
    content: '';
    flex: 1;
    border-bottom: 1px solid #e2e8f0;
}

.divider span {
    padding: 0 1rem;
}

.login-link {
    text-align: center;
    margin-top: 1.5rem;
}

.login-link a {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.login-link a:hover {
    color: #764ba2;
    gap: 0.75rem;
}

@media (max-width: 576px) {
    .signup-form {
        padding: 1.5rem;
    }

    .signup-header h2 {
        font-size: 1.75rem;
    }

    .features-list {
        padding: 1rem;
    }
}
</style>

<div class="signup-container">
    <div class="signup-header">
        <h2>Create Account</h2>
        <p>Join us today and get started in minutes</p>
    </div>

    <div class="signup-form">
        <div class="features-list">
            <h3>What you'll get</h3>
            <ul>
                <li>
                    <i class="fas fa-check-circle"></i>
                    <span>Full access to all features</span>
                </li>
                <li>
                    <i class="fas fa-check-circle"></i>
                    <span>Secure & encrypted data</span>
                </li>
                <li>
                    <i class="fas fa-check-circle"></i>
                    <span>24/7 customer support</span>
                </li>
            </ul>
        </div>

        <!-- Form -->
        <form method="post">
            {% csrf_token %}

            <!-- Render password fields manually for eye icon -->
            <p>
                {{ form.username.label_tag }}
                {{ form.username }}
            </p>

            <p>
                {{ form.email.label_tag }}
                {{ form.email }}
            </p>

            <p style="position:relative;">
                {{ form.password1.label_tag }}
                {{ form.password1 }}
                <span class="password-toggle" onclick="togglePassword('id_password1')">
                    <i class="fas fa-eye" id="toggle-icon-id_password1"></i>
                </span>
                <div class="password-strength">
                    <div id="password-bar" class="password-strength-bar"></div>
                </div>
            </p>

            <p style="position:relative;">
                {{ form.password2.label_tag }}
                {{ form.password2 }}
                <span class="password-toggle" onclick="togglePassword('id_password2')">
                    <i class="fas fa-eye" id="toggle-icon-id_password2"></i>
                </span>
            </p>

            <button type="submit" class="btn-signup">
                <i class="fas fa-user-plus"></i>
                Create My Account
            </button>
        </form>

        <div class="divider">
            <span>Already have an account?</span>
        </div>

        <div class="login-link">
            <a href="/accounts/login/">
                <i class="fas fa-arrow-left"></i>
                Back to Login
            </a>
        </div>
    </div>
</div>

<!-- JS for show/hide password & strength -->
<script>
function togglePassword(fieldId) {
    const input = document.getElementById(fieldId);
    const icon = document.getElementById('toggle-icon-' + fieldId);
    if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        input.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
}

// Password strength indicator
const passwordInput = document.getElementById('id_password1');
const passwordBar = document.getElementById('password-bar');

passwordInput.addEventListener('input', function() {
    const value = passwordInput.value;
    let strength = 0;

    if (value.length >= 6) strength = 1; // medium
    if (value.length >= 8 && /[A-Z]/.test(value) && /[0-9]/.test(value) && /[!@#$%^&*]/.test(value)) strength = 2; // strong

    if(strength === 0){
        passwordBar.style.width = '33%';
        passwordBar.style.backgroundColor = '#ef4444';
    } else if(strength === 1){
        passwordBar.style.width = '66%';
        passwordBar.style.backgroundColor = '#f59e0b';
    } else {
        passwordBar.style.width = '100%';
        passwordBar.style.backgroundColor = '#10b981';
    }
});
</script>

{% endblock %}
